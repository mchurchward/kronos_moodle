YUI.add("moodle-block_rlagent-mass",function(e,t){M.block_rlagent=M.block_rlagent||{},M.block_rlagent={skip_update_init:function(){$button=e.one("#skipupdate"),e.one("#skipupdate").on("click",function(){e.one(".site-update").hide(!0,function(){e.one(".plugin-select").setStyle("display","block").hide().show(!0)}),M.block_rlagent.plugin_select_init()})},update_site_init:function(){e.one("#doupdate").on("click",function(t){t.target.setAttribute("disabled"),e.one(".site-update-spinner").show(!0),$useremail=e.one("#useremail").get("text")})},plugin_select_init:function(){M.block_rlagent.plugin_select_filter(),M.block_rlagent.plugin_clear_filters(),M.block_rlagent.plugin_input_filter(),M.block_rlagent.plugin_dropdown_visibility(),M.block_rlagent.plugin_rate_plugins()},plugin_manage_dropdown:function(){},plugin_add_filter:function(t){$labelsbox=e.one("#labels-box"),$labelsbox.getStyle("display")==="none"&&$labelsbox.setStyle("display","block"),$filters=e.all("#filter-labels span.badge"),$filterlist=$filters.get("text");var n=[];return e.Array.each($filterlist,function(e){n.push(e.trim())}),n.indexOf(t)<=-1?($labelmarkup='<span class="badge">'+t+'<i class="fa fa-times" alt="Remove Filter"></i></span>',$filters.length>=1?$item=$filters.item($filterlist.length-1).insert($labelmarkup,"after"):$item=e.one("#filter-labels").insert($labelmarkup),M.block_rlagent.filter_plugins(),M.block_rlagent.plugin_remove_filter(),M.block_rlagent.plugin_show_filterblock(),$item):!1},plugin_select_filter:function(){e.all("ul#select-filters li").on("click",function(t){$target=e.one(t.currentTarget),$label=$target.one("a").get("text"),M.block_rlagent.plugin_add_filter($label)})},plugin_dropdown_visibility:function(){$filter_ul=e.one("ul#select-filters"),$filter_li=e.all("ul#select-filters li"),$filter_btn=e.one("#btn-select-filter"),$filter_btn.on("click",function(){$filter_ul.getStyle("display")==="block"?($filter_ul.setStyle("display","none"),$filter_ul.get("parentNode").toggleClass("open")):($filter_ul.setStyle("display","block"),$filter_ul.get("parentNode").toggleClass("open"))}),$filter_li.on("click",function(){$filter_ul.getStyle("display")==="block"?($filter_ul.setStyle("display","none"),$filter_ul.get("parentNode").toggleClass("open")):($filter_ul.setStyle("display","block"),$filter_ul.get("parentNode").toggleClass("open"))})},plugin_input_filter:function(){function t(){$filter=e.one("input#plugin-filter").get("value"),$filter.length>=1&&(M.block_rlagent.plugin_add_filter($filter),$input.set("value","")),M.block_rlagent.plugin_show_filterblock()}$input=e.one("input#plugin-filter"),$inputengaged=!1,$input.on("click",function(){$input.set("value",""),$inputengaged=!0,$input.on("blur",function(){$inputengaged=!1}),$input.on("key",t,"enter")})},plugin_clear_filters:function(){$clearbutton=e.one("button#clear-filters"),$clearbutton.on("click",function(){e.all("#filter-labels span.badge").remove(!0),M.block_rlagent.filter_plugins(),M.block_rlagent.plugin_hide_filterblock()})},plugin_show_filterblock:function(){e.all("#filter-labels span.badge").size()>=1&&e.one("#labels-box").show(!0)},plugin_hide_filterblock:function(){e.all("#filter-labels span.badge").size()<=0&&e.one("#labels-box").hide(!0)},plugin_remove_filter:function(){$removebutton=e.all("#filter-labels i.fa-times"),$removebutton.on("click",function(e){$target=e.target.get("parentNode").remove(!0),M.block_rlagent.plugin_hide_filterblock()})},plugin_rate_plugins:function(){e.all(".rate-plugin .fa-star-o, .rate-plugin .fa-star").on("click",function(t){$target=e.one(t.target),$starset=$target.get("parentNode").get("children").filter(".fa"),$clickedindex=$starset.indexOf($target),$fillstars=$starset.slice(0,$clickedindex+1),$emptystars=$starset.slice($clickedindex+1,$starset.size()+1),$rating=$clickedindex+1,$starset.each(function(e){e.hasClass("fa-star-o")&&e.removeClass("fa-star-o"),e.hasClass("fa-star")&&e.removeClass("fa-star"),$starset.indexOf(e)===$starset.size()-1&&($emptystars.addClass("fa-star-o"),$fillstars.addClass("fa-star"),M.block_rlagent.send_rating($rating))})})},send_rating:function(e){},filter_plugins:function(){},init:function(){$updateshown=e.one(".site-update").getStyle("display"),$updateshown==="none"?M.block_rlagent.plugin_select_init():(M.block_rlagent.skip_update_init(),M.block_rlagent.update_site_init())}}},"@VERSION@",{requires:["base","node","panel","plugin","transition","event","event-delegate"]});
